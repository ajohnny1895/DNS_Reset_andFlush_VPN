# Resets DNS to auto, flushes DNS, and disables IPv6 Windows 7+

Having connectivity issues with known networks on windows 10 and your network wifi adapter? This is a batch script you can use to reset your IPv4 DNS to auto using DHCP command, disable the IPv6 option (if you are not using VPN or do not want IPv6 running on your ip address), and flushes the DNS cache.

This is mainly for PC devices manufactured between 2012-2016 and using any Windows 10 or Windows 10 1500+ versions. For some reason, some Windows 10 1500+ versions on most laptops or PCs with wifi adapters from realtek 8723UA or before do not work with the new kernals of Windows 10 1500+ and either cause internet connectivity issues or kick wifi connection from PC to wifi/network. Because these adapters were made before windows 10 and generally for Vista up to Windows 8.1, support and bios/architecture of the network adapter is not working with Windows 10 all the time. Because of 5G, 20MHz, 40MHz, and 50MHz bandwiths, AC/AG/BGN etc, older adapters that were made before 5G or 4GLTE devices and routers, somehow have issues in code or kernal or some other bug and cannot be fixed because the functions or programming has been deprecated ever since Windows 10 1500+. Notice that most adapter drivers for Microsoft were only supported until 2016 before Windows 10. Even a restoration of settings with Windows 10 does not solve this problem, so I have created this batch file to flush DNS, turn off IPV6, turn on/off all network adapters or turn off some of them, and forget or remove known networks to avoid doing an ipsec tcp/ip reset or sockets clearing so that the known network you have trouble connecting with will automatically be like new. I do not have this problem with every single router, and it may be my router itself because my Realtek 8723AU works with my mobile phone that supports 50MHz (5G hotspotting) and other ac/bgn router networks. But this can come in use if you want to delete known networks, specific known networks, but you will have to add a loop if you want it to do it recursively for all known networks to start fresh. Although netsh ip reset sounds easier, you have to restart the computer - this does not require the restarting of your pc and can be performed with task scheduler on startup.

You can add additional lines of adapters to dhcp command those adapters as well as disable the IPv6 option so that there are no leaks when using your wifi or VPN unless your VPN has both IPv4 and IPv6. This should also flush the DNS to close out any DNS hijacks, DNS resolve problems while your DNS was not in DHCP command or auto, and also clear the cache of the DNS from all websites you visited so that when you launch your browser and visit new websites this should allow your browser to query with a new list of website domains from the resetted DNS.

This script can also be used after disconnecting from your VPN or before enabling your VPN if your VPN does not automatically reset the DNS after you have disconnected from the ISP of the VPN service. Also, sometimes malware or other configurations saved in virtual adapters like VMware or other virtual network interfaces that sometimes save or copy other DNS settings and overlap your wifi/ethernet adapter. 

If this does not solve any of your wifi or IPv4/6 internet problems, you may need to do a TCP/IP reset or check your router for problems in the routing table, the subnet and DHCP default gateway of your IPv4 settings and router. You may also need to change the channel of your router because Channel 1 is frequently used by many routers, wifi receivers such as your computers or phone, and may cause interference so changing the channel may help especially if you live in an apartment or condo complex where living quarters are very close to each other and the walls are thin. You may need to also reduce the bandwith strength if you want only a proximity of range so that your router is not overlapping or overpowering others. If this does not help, you may need to reset your router in addition to these steps. Usually it is not the wifi adapter or card of your laptop/desktop/computer that is causing the connectivity issues, but the router or your ISP itself. Also make sure your router bands are set to 2.4GHz and 5GHz or to appropriate bands available for your wifi adapter. This does not solve tcp/ip resetes or sockets problems after using VPN.

Simply copy and paste to notepad and save as a .bat and then use task scheduler in windows to schedule this batch script at the startup or logon of your computer. You will need to set the administrative privileges or "root" control for the task scheduler so that you do not need to confirm administrator priveleges. You can also create a shortcut to the desktop of the script and set it to run with administrative privileges so that when you launch the shortcut the batch file will run with full control whenever you feel like resetting your DNS to auto or to flush your DNS cache. 

Have the task scheduler perform this script on startup. 

# 1.1.0 Version Aug 08 2020
Added a command to "forget" or delete known networks
(you will ned to write a loop to recursively delete all known networks if you do not want to delete a single/individual network)
